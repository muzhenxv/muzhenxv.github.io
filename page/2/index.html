<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="the Home of MuZhen">
<meta property="og:url" content="http://www.muzhen.tk/page/2/index.html">
<meta property="og:site_name" content="the Home of MuZhen">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="the Home of MuZhen">






  <link rel="canonical" href="http://www.muzhen.tk/page/2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>the Home of MuZhen</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">the Home of MuZhen</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/17/pansee/film review/霹雳娇娃——约瑟夫·麦克金提·尼彻/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/17/pansee/film review/霹雳娇娃——约瑟夫·麦克金提·尼彻/" class="post-title-link" itemprop="url">霹雳娇娃——约瑟夫·麦克金提·尼彻</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-17 16:38:52" itemprop="dateCreated datePublished" datetime="2019-03-17T16:38:52+08:00">2019-03-17</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/film-review/" itemprop="url" rel="index"><span itemprop="name">film review</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>电影名： 霹雳娇娃</p>
<p>导演： 约瑟夫·麦克金提·尼彻</p>
<p>评分： 4</p>
<p>剧情： 女子特工三人组的破案故事。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/17/pansee/film review/迷巢——金波·兰道/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/17/pansee/film review/迷巢——金波·兰道/" class="post-title-link" itemprop="url">迷巢——金波·兰道</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-17 16:35:43" itemprop="dateCreated datePublished" datetime="2019-03-17T16:35:43+08:00">2019-03-17</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/film-review/" itemprop="url" rel="index"><span itemprop="name">film review</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>电影名： 迷巢</p>
<p>导演： 金波·兰道</p>
<p>评分： 4</p>
<p>剧情： 身为探险家的弟弟深陷遗迹之中。姐姐和公司合伙人大叔组建营救队前往营救，深入始皇陵，挖掘出了长生不老药的秘密。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/16/pansee/film review/电影评分规则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/16/pansee/film review/电影评分规则/" class="post-title-link" itemprop="url">电影评分规则</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-16 17:35:06" itemprop="dateCreated datePublished" datetime="2019-03-16T17:35:06+08:00">2019-03-16</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/film-review/" itemprop="url" rel="index"><span itemprop="name">film review</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="20190316"><a href="#20190316" class="headerlink" title="20190316"></a>20190316</h1><p>电影评分规则收紧，从原先的0、7、10三档改为0、4、7、10四档：</p>
<ul>
<li>0: 烂片</li>
<li>4: 一般</li>
<li>7: 有亮点</li>
<li>10: 值得再看</li>
</ul>
<p>7、10档必须有评语，不能只述说电影情节。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/16/pansee/film review/保持通话——陈木胜/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/16/pansee/film review/保持通话——陈木胜/" class="post-title-link" itemprop="url">保持通话——陈木胜</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-16 17:30:46" itemprop="dateCreated datePublished" datetime="2019-03-16T17:30:46+08:00">2019-03-16</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/film-review/" itemprop="url" rel="index"><span itemprop="name">film review</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>电影名： 保持通话</p>
<p>导演： 陈木胜</p>
<p>评分： 4</p>
<p>剧情： 弟弟无意航拍到杀人现场，被凶手追杀，姐姐也因此被绑架。姐姐利用报废电话拨通了邦的电话。两人一边通过电话互通消息，一边开始与凶手的赛跑和对抗。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/16/pansee/film review/致命危机——Frank A. Cappello/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/16/pansee/film review/致命危机——Frank A. Cappello/" class="post-title-link" itemprop="url">致命危机——Frank A. Cappello</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-16 17:28:26" itemprop="dateCreated datePublished" datetime="2019-03-16T17:28:26+08:00">2019-03-16</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/film-review/" itemprop="url" rel="index"><span itemprop="name">film review</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>电影名： 致命危机</p>
<p>导演： Frank A. Cappello</p>
<p>评分： 4</p>
<p>剧情： 黑帮大佬之子被杀，涉事警察之子被大佬绑架，要求用幕后凶手交换。警察与凶手最终携手干掉大佬。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/13/pansee/work/某银行项目的经验和教训/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/13/pansee/work/某银行项目的经验和教训/" class="post-title-link" itemprop="url">某银行项目的经验和教训</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-13 21:55:04" itemprop="dateCreated datePublished" datetime="2019-03-13T21:55:04+08:00">2019-03-13</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/work/" itemprop="url" rel="index"><span itemprop="name">work</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>由于以前大部分做的是10W数据量级的简单特征工程和模型，基本都是使用python进行单机处理。即使是一些log数据的分析，特征衍生的逻辑也相对简单，即使用写的比较低效的sql代码也可以跑批出结果。本次参与的某银行反欺诈项目，数据量级在亿级，主要的特征工程是滑窗构造特征。在这个项目过程中，凸显了原先的小数据思维的局限性和误区。</p>
<h1 id="stage-0-自关联"><a href="#stage-0-自关联" class="headerlink" title="stage-0:自关联"></a>stage-0:自关联</h1><p>对于滑窗特征的构造方法，一开始采用的是自关联的方式。比如客户号子关联加上时间限制（例如3个月），这样就可以拿到每个客户3个月内的所有交易记录。这样的做法会造成表数据量级激增。在该项目中，40w样本自关联后变成6000w，可以看到对于上亿数据，自关联是不现实的！</p>
<p>由于在滑窗的时候，可能不是单纯的根据客户号进行窗口内交易筛选。可能只关心该客户+本次交易使用设备在窗口内的交易行为。类似客户+设备这样的限制成为双主体，只是客户称为单主体。一般会关注几个主要的单主体，以及这些单主体配合一些其他字段形成的双主体。这样的主体可能会有很多，最笨的方法就是在自关联的时候将关联键设为主体，一个主体一个临时表。</p>
<p>当主体很多的时候，临时表太多，极为不利于管理。因此想到了只以核心主体进行关联，然后添加标识列，标识该记录是否属于某个主体或主体组合。这样也就是有多少需要考察的主体，就要有多少标识列。</p>
<p>另一方面，一般窗口可能会是时间窗口和次数窗口两种。时间窗口直接就是交易时间差，并不随主体而变化，很容易。但是次数窗却受限制于主体，同一笔交易，在不同的主体下，对应的次数排序是不一样的，因此也需要添加标识列，一个主体一个次数标识列。</p>
<p>临时表出来后，将数据拉到python中，进行窗口内的聚合操作，对于连续型变量考察mean、max、median、min等，对于离散型变量考察该字段取值在窗口内的出现频率、与窗口内众数频率差等。需要注意的是，这些聚合函数一般都是聚合后在和当笔交易的变量值进行做差、作除等操作，这样做的好处是可以让该特征变为相对值，考察的是当笔与历史行为的差异。</p>
<h1 id="stage-1：滑窗"><a href="#stage-1：滑窗" class="headerlink" title="stage-1：滑窗"></a>stage-1：滑窗</h1><p>上述自关联的做法在大数据量情况下是行不通的！</p>
<p>经过调研，发现spark本身提供了window窗口函数，可以按照次数或特定变量取值范围进行滑窗。</p>
<p>在使用spark的过程中，面临几个问题：</p>
<ol>
<li>次数窗其实有一个隐藏条件，就是必须是某个时间段内的，比如3个月。不可能无限往前追溯。对每笔记录，在滑窗的时候都必须有这个时间段限制，从而保证口径一致。</li>
<li>时间窗原先是严格按照秒进行滑窗的，但是这在工程实现中无法实现。因为工程实现的时候时间窗需要拆解为可以在redis里实时流计算的小窗和批量离线运算的大窗。</li>
<li>中位数、众数这样的运算复杂度非常高，spark也并没有可用的高效函数。</li>
</ol>
<p>对于时间窗问题，小窗直接按秒滑窗是没有问题的。对于大窗，必须要改为天粒度，至于当天的时间是否需要纳入滑窗范围可以根据需求来。建议是不纳入的，同时采用t+2的窗口，也就是当天和昨天都不纳入窗口范围。这样工程跑批会没有压力。t+1会出现凌晨的交易流水对应的跑批特征出不来的情况。</p>
<p>对于函数问题，采用的方案是使用spark window函数，然后用collect_list将窗口内值彻底聚合成一个list，对该list施加相应的python udf。</p>
<h1 id="stage-2：-优化"><a href="#stage-2：-优化" class="headerlink" title="stage-2： 优化"></a>stage-2： 优化</h1><p>上述做法依旧存在低效率的问题。个人认为collect_list-&gt;python udf这个步骤会很低效。</p>
<p>采用的优化方式如下：</p>
<ol>
<li>弃用中位数、众数这样的复杂运算</li>
<li>对于时间窗，可以利用窗口函数分别计算对应大小窗的值：大窗按照主体分组按照天时间戳滑窗，小窗按照主体分组按照秒时间戳滑窗。大窗包含小窗，<strong><em>按照天时间滑窗+按照主体及交易天分组按照秒时间滑24小时</em></strong>即可。其实还有一种方法是，将当天的零头时间压缩10000倍，加到天时间戳上，这样就可以保证记录的秒级排序，同时只需要控制rangeBetween的下界就可以得到喊大窗的小窗。rangeBetween的边界条件不支持浮点，所以前面得到的时间戳需要在放大100000倍被成一个长整型。于是，问题来了，spark2.1的rangeBetween不支持长整型，spark2.3才支持。所以在该项目中，受限于环境，没有使用这种方法。</li>
<li>对于次数窗，先分别利用窗口函数计算次数时间限对应的时间窗和次数窗，需要计算对应的聚合函数和记录数计数。然后根据记录数来判定应该使用哪个窗口的聚合值来作为该记录次数窗的取值。比如如果3个月记录数12条，次数窗为10,那么取次数窗对应聚合值，如果3个月记录数为8条，那么取时间窗。</li>
<li>对于离散型变量聚合，滑窗函数partition by的对象改为主体字段+该变量字段，在对应窗口内聚合就可以得到该字段取值在窗口内的出现频次。对于频率，只要除以窗口记录数就好。</li>
</ol>
<h1 id="stage-3：教训"><a href="#stage-3：教训" class="headerlink" title="stage-3：教训"></a>stage-3：教训</h1><p>由于以前一直是小样本的玩耍，犯错的成本很低，可以从容的重跑。但是大样本情况下，运算逻辑一旦有问题，就要浪费几天时间重跑，时间代价非常大。所以一定要做好：</p>
<ol>
<li>小样本测试</li>
<li>边界测试</li>
</ol>
<p>确保没有问题后再去全量运行。</p>
<h1 id="stage-4：思维"><a href="#stage-4：思维" class="headerlink" title="stage-4：思维"></a>stage-4：思维</h1><p>对于一个项目，应该先去考虑能不能做出来，再去考虑有没有价值，然后是优化空间，最后是创新问题。另外，需要贯穿始终的是风险意识，既不给自己挖坑，也不给客户挖坑。</p>
<ul>
<li>工程思维： 什么可以在规定的时间和资源内做出来，什么做不出来</li>
<li>产品思维：有大局观，考虑到做出来的东西有什么用，怎么用，如何真正可行的应用于生产？</li>
<li>优化思维：如何在作出一个产品的基础上去优化开发效率、优化产品的质量</li>
<li>创新思维：尝试新技术、新方法，新角度</li>
<li>风险思维：贯穿全局的风险思维，考虑到项目风险，可行性等</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/03/02/development/environment/install vps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/02/development/environment/install vps/" class="post-title-link" itemprop="url">install vps</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-02 10:29:48" itemprop="dateCreated datePublished" datetime="2019-03-02T10:29:48+08:00">2019-03-02</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/environment/" itemprop="url" rel="index"><span itemprop="name">environment</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="buy-a-VPS"><a href="#buy-a-VPS" class="headerlink" title="buy a VPS"></a>buy a VPS</h1><p>recommend <a href="https://bandwagonhost.com" target="_blank" rel="noopener">bandwagonhost</a></p>
<h1 id="deploy-VPS"><a href="#deploy-VPS" class="headerlink" title="deploy VPS"></a>deploy VPS</h1><p>click <strong>Services</strong> &gt; <strong>My Services</strong>  &gt; <strong>KiwiVM Control Panel</strong>  &gt; <strong>Root shell - interactive</strong><br>then write code in the presented terminal:</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br><span class="line">\\<span class="keyword">type</span> <span class="type">your </span>passwd</span><br><span class="line">\\<span class="keyword">type</span> <span class="type">your </span>passwd again</span><br></pre></td></tr></table></figure>
<h1 id="renistall-system"><a href="#renistall-system" class="headerlink" title="renistall system"></a>renistall system</h1><ol>
<li>stop the VPS  </li>
</ol>
<p>click  <strong>KiwiVM Control Panel</strong> &gt; <strong>Main controls</strong> &gt; <em>stop</em>(at the right middle of the interface) </p>
<ol start="2">
<li>install system</li>
</ol>
<p>click  <strong>KiwiVM Control Panel</strong> &gt; <strong>Install new OS</strong></p>
<h1 id="install-Shadowsocks-Server"><a href="#install-Shadowsocks-Server" class="headerlink" title="install Shadowsocks Server"></a>install Shadowsocks Server</h1><p>click  <strong>KiwiVM Control Panel</strong> &gt; <strong>Shadowsocks Server</strong>(at the left bottom)</p>
<p>如果vps本身没有提供一键安装功能，也可以自己简单的进行安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 安装shadowsocks</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># ubuntu</span></span></span><br><span class="line">apt-get install python-pip</span><br><span class="line">pip install setuptools shadowsocks</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># centos</span></span></span><br><span class="line">yum install python-setuptools &amp;&amp; easy_install pip</span><br><span class="line">pip install setuptools shadowsocks </span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.编辑配置文件</span></span><br><span class="line">vi /etc/shadowsocks.json </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 输入以下内容</span></span></span><br><span class="line">​</span><br></pre></td></tr></table></figure>
<p>{<br>   “server”:”my_server_ip”,<br>   “server_port”:25,<br>   “local_address”: “127.0.0.1”,<br>   “local_port”:1080,<br>   “password”:”mypassword”,<br>    “timeout”:300,<br>   “method”:”aes-256-cfb”,<br>   “fast_open”: false } </p>
<h1 id="字段含义"><a href="#字段含义" class="headerlink" title="字段含义"></a>字段含义</h1><p>server: 服务器ip地址<br>server_port: 绑定的端口，注意不要设置已经使用了的端口<br>possword: 密码<br>timeout: 超时时间<br>method: 加密方法<br>fast_open: 如果你的服务器 Linux 内核在3.7+，可以开启 fast_open 以降低延迟<br>workers: 默认为1<br>​<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 后台启动shadowsocks，日志会被保存在 /var/log/shadowsocks.log</span></span><br><span class="line">ssserver -c <span class="regexp">/etc/</span>shadowsocks.json -d start</span><br><span class="line"><span class="comment"># 4. 关闭shadowsocks</span></span><br><span class="line">ssserver -c <span class="regexp">/etc/</span>shadowsocks.json -d stop</span><br></pre></td></tr></table></figure></p>
<p>#accelerate SS </p>
<ol>
<li>connect remote machine</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -l root -<span class="selector-tag">p</span> port_id ip</span><br></pre></td></tr></table></figure>
<p>your port_id and ip can find in the interface of SS</p>
<ol start="2">
<li>download Net-Speeder</li>
</ol>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>coding.net<span class="regexp">/u/</span>njzhenghao<span class="regexp">/p/</span>download<span class="regexp">/git/</span>raw<span class="regexp">/master/</span>net_speeder-installer.sh</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>compile and install</li>
</ol>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bash </span>net_speeder-installer.sh</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>accelerate port </li>
</ol>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup <span class="regexp">/usr/</span>local<span class="regexp">/net_speeder/</span>net_speeder venet0 <span class="string">"ip"</span> &gt;<span class="regexp">/dev/</span><span class="keyword">null</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> &amp;</span><br></pre></td></tr></table></figure>
<p>if a port number is typed on the terminal,you are success.</p>
<h1 id="debug-and-fix"><a href="#debug-and-fix" class="headerlink" title="debug and fix"></a>debug and fix</h1><p>if your SS speed is very low,maybe your SS is bad.And you can fix by using the codes below:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ssh -l root -p port_id ip</span><br><span class="line">\\reboot VPS</span><br><span class="line">reboot</span><br><span class="line">\\connect VPS again</span><br><span class="line">ssh -l root -p port_id ip</span><br><span class="line">nohup /usr/local/net_speeder/net_speeder venet0 <span class="string">"ip"</span> &gt;/dev/<span class="literal">null</span> 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></p>
<h1 id="references"><a href="#references" class="headerlink" title="references"></a>references</h1><p><a href="http://www.jianshu.com/p/57f45490620c" target="_blank" rel="noopener">reference</a></p>
<p><a href="http://blog.chinaunix.net/uid-25530360-id-5595974.html" target="_blank" rel="noopener">科学上网：用 VPS 搭建 shadowsocks 服务器</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构/" class="post-title-link" itemprop="url">数据结构</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<p>在线课程 <a href="http://www.icourse163.org/course/ZJU-93001" target="_blank" rel="noopener">MOOC浙江大学数据结构课程</a></p>
<h1 id="第一讲-基本概念"><a href="#第一讲-基本概念" class="headerlink" title="第一讲 基本概念"></a>第一讲 基本概念</h1><h2 id="1-1-什么是数据结构"><a href="#1-1-什么是数据结构" class="headerlink" title="1.1 什么是数据结构"></a>1.1 什么是数据结构</h2><p><strong><em>数据结构</em></strong>： 数据对象在计算机中的组织方式。分为两种：</p>
<ul>
<li>逻辑结构： 树，图等</li>
<li>物理结构： 在计算机中怎么放，列表，数组等</li>
</ul>
<p><strong><em>数据类型</em></strong>： 数据是按照数据结构分类的，具有相同数据结构的数据属同一类。同一类数据的全体称为一个数据类型</p>
<p><strong><em>抽象数据类型</em></strong>： 它可理解为数据类型的进一步抽象。即把数据类型和数据类型上的运算捆在一起，进行封装。也就是包含两个部分：</p>
<ul>
<li>数据对象集</li>
<li>数据集合相关联的操作集</li>
</ul>
<h2 id="1-2-什么是算法"><a href="#1-2-什么是算法" class="headerlink" title="1.2 什么是算法"></a>1.2 什么是算法</h2><p>算法的评价指标：</p>
<ul>
<li>空间复杂度S(n)： 根据算法写成的程序执行时占用存储单元的长度</li>
<li>时间复杂度T(n)： 根据算法写成的程序执行时耗费时间的长度</li>
<li><strong>最坏情况复杂度T_worst(n)</strong>（一般看这个,因为平均复杂度不好得到）</li>
<li>平均复杂度T_avg(n)</li>
</ul>
<p>一个for循环的时间复杂度等于循环次数乘以循环体代码的复杂度<br>if-else结构的算法复杂度取决于<strong>if的条件判断复杂度</strong>和两个分枝部分的复杂度，总体复杂度取<strong>三者中最大</strong></p>
<h2 id="1-3-应用实例：-最大子列和问题"><a href="#1-3-应用实例：-最大子列和问题" class="headerlink" title="1.3 应用实例： 最大子列和问题"></a>1.3 应用实例： 最大子列和问题</h2><h1 id="第二讲-线性结构"><a href="#第二讲-线性结构" class="headerlink" title="第二讲 线性结构"></a>第二讲 线性结构</h1><h2 id="2-1-线性表及其实现"><a href="#2-1-线性表及其实现" class="headerlink" title="2.1 线性表及其实现"></a>2.1 线性表及其实现</h2><p>抽象数据类型名称： 线性表（List）</p>
<p>数据对象集： 线性表是n个元素构成的有序序列</p>
<p>操作集： ～</p>
<p>实现方式： </p>
<ul>
<li>利用数组的连续存储空间顺序存放线性表的各元素  </li>
<li>利用链式存储来实现。不要求逻辑上相邻的两个元素物理上也相邻，通过链建立起数据元素之间的逻辑关系。</li>
</ul>
<p>广义表： 线性表的推广<br>对于线性表而言， n个元素都是基本的单元素<br>广义表中，这些元素不仅可以是单元素也可以是另一个广义表</p>
<p>多重链表： 链表中的节点可能同时隶属于多个链<br>多重链表中节点的指针域会有多个<br>但包含两个指针表的链表并不一定是多重链表，比如双向链表不是多重链表</p>
<h2 id="2-2-堆栈（Stack）"><a href="#2-2-堆栈（Stack）" class="headerlink" title="2.2 堆栈（Stack）"></a>2.2 堆栈（Stack）</h2><p>后缀表达式： 从左向右扫描，逐个处理运算数和运算符号。好处是不再需要考虑运算符号优先级，也就可以遇到符号就运算而不是等所有数据都出来再判断优先级。先记住运算数，一旦遇到运算符号就拿出最后两个运算数进行运算。因此需要有种存储方法， 能顺序存储运算数，并在需要时倒序输出。</p>
<p>堆栈（Stack）： 具有一定操作约束的线性表。只在一端（栈顶，Top）做插入、删除</p>
<p>插入数据： 入栈（Push）<br>删除数据： 出栈（Pop）<br>后入先出： Last In First Out（LIFO）</p>
<p>中缀表达式转化为后缀表达式：<br><img src="http://omdhuynsr.bkt.clouddn.com/17-10-4/28616297.jpg" alt></p>
<h2 id="2-3-队列"><a href="#2-3-队列" class="headerlink" title="2.3 队列"></a>2.3 队列</h2><p>队列（Queue）： 具有一定操作约束的线性表。只能在一端插入，而在另一端删除。  </p>
<p>数据插入： 入队列（AddQ）<br>数据删除： 出队列（DeleteQ）<br>先进先出： FIFO</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构第一讲：基本概念/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构第一讲：基本概念/" class="post-title-link" itemprop="url">数据结构第一讲：基本概念</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<p>在线课程 <a href="http://www.icourse163.org/course/ZJU-93001" target="_blank" rel="noopener">MOOC浙江大学数据结构课程</a></p>
<h1 id="1-1-什么是数据结构"><a href="#1-1-什么是数据结构" class="headerlink" title="1.1 什么是数据结构"></a>1.1 什么是数据结构</h1><h2 id="书架放书"><a href="#书架放书" class="headerlink" title="书架放书"></a>书架放书</h2><p>需要解决</p>
<ol>
<li>新书插入</li>
<li>查找某本书的问题</li>
</ol>
<p>方法：</p>
<ol>
<li>随机按顺序放<ul>
<li>插入很简单，直接放最后</li>
<li>查找很困难，一本一本找</li>
</ul>
</li>
<li>按书名拼音顺序放<ul>
<li>插入困难，需要把所有拼音顺序在之后的书都后移</li>
<li>二分查找</li>
</ul>
</li>
<li>先分类，在按拼音顺序放<ul>
<li>小范围的插入和查找同上</li>
<li>需要选择合适的类别数，太大则归类困难</li>
</ul>
</li>
</ol>
<h2 id="打印数列"><a href="#打印数列" class="headerlink" title="打印数列"></a>打印数列</h2><p>给定一个数N，一次打印从1到N.</p>
<p>方法：</p>
<ol>
<li><p>遍历打印</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">        print(i)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'f1-------'</span>)</span><br><span class="line">f1(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>递归打印</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">1</span>:</span><br><span class="line">        f2(n<span class="number">-1</span>)</span><br><span class="line">    print(n)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'f2-------'</span>)</span><br><span class="line">f2(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>看起来递归更加简洁，但是当n过大时，会挤爆空间！</p>
<h2 id="多项式计算"><a href="#多项式计算" class="headerlink" title="多项式计算"></a>多项式计算</h2><p>程序实现<br>$$<br>f(x) = a_0 + a_1x + a_2x^2 + … + a_nx^n<br>$$<br>方法：</p>
<ol>
<li><p>简单实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x, n, a=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> a <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    y = a[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        y += a[i+<span class="number">1</span>] * x**(i+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">f1(<span class="number">2</span>, <span class="number">3</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>递归<br>$$<br>f(x) = a_0 + x(a_1 + x(…(a_{n-1} + x(a_n))…))<br>$$</p>
</li>
</ol>
   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(x, n, a=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> a <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    y = a[<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n, <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">        y = y * x + a[i<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">f2(<span class="number">2</span>, <span class="number">3</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>加减法不耗资源，主要考虑乘除法的元素次数。</p>
<p>方法1做了$n + (1+2+…+(n-1)) = (n^2 + n)/2$次乘法运算</p>
<p>方法2做了n次乘法运算</p>
<p>优劣立现！</p>
<h2 id="什么是数据结构"><a href="#什么是数据结构" class="headerlink" title="什么是数据结构"></a>什么是数据结构</h2><p><strong>数据对象</strong>在计算机中的组织方式</p>
<ul>
<li>逻辑结构</li>
<li>物理存储结构</li>
</ul>
<p><strong>抽象数据类型</strong></p>
<ul>
<li>数据对象集</li>
<li>操作集</li>
</ul>
<h1 id="1-2-什么是算法"><a href="#1-2-什么是算法" class="headerlink" title="1.2 什么是算法"></a>1.2 什么是算法</h1><ul>
<li>空间复杂度S(n)</li>
<li>时间复杂度T(n)</li>
</ul>
<h1 id="1-3-最大子列和问题"><a href="#1-3-最大子列和问题" class="headerlink" title="1.3 最大子列和问题"></a>1.3 最大子列和问题</h1><p>问题：<br>$$<br>给定N个整数的序列{A_1, A_2, …, A_N},求函数f(i, j) = \max{\{0,\sum_{k=i}^j A_k\}}的最大值<br>$$</p>
<p>方法：</p>
<ol>
<li><p>暴力破解</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(a)</span>:</span></span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    inds1 = <span class="number">-1</span></span><br><span class="line">    inds2 = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i, len(a)):</span><br><span class="line">            t = <span class="number">0</span></span><br><span class="line">            <span class="comment"># t = sum(a[i:j+1])</span></span><br><span class="line">            <span class="keyword">for</span> k <span class="keyword">in</span> range(i, j+<span class="number">1</span>):</span><br><span class="line">                t += a[k]</span><br><span class="line">            <span class="keyword">if</span> t &gt;= s:</span><br><span class="line">                s = t</span><br><span class="line">                inds1 = i</span><br><span class="line">                inds2 = j</span><br><span class="line">    <span class="keyword">return</span> s, inds1, inds2</span><br><span class="line"></span><br><span class="line">f1([<span class="number">1</span>,<span class="number">5</span>,<span class="number">-6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">-3</span>,<span class="number">-4</span>,<span class="number">8</span>,<span class="number">-9</span>,<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>一开始使用sum函数，误以为时间复杂度是$O(n^2)$，其实sum本身也有复杂度，真实复杂度是$O(n^3)$。不要过度依赖函数，要看计算本质！</p>
<p>​</p>
</li>
</ol>
<ol start="2">
<li><p>暴力破解优化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(a)</span>:</span></span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    inds1 = <span class="number">-1</span></span><br><span class="line">    inds2 = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        t = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(i, len(a)):</span><br><span class="line">            t += a[j]</span><br><span class="line">            <span class="keyword">if</span> t &gt;= s:</span><br><span class="line">                s = t</span><br><span class="line">                inds1 = i</span><br><span class="line">                inds2 = j</span><br><span class="line">    <span class="keyword">return</span> s, inds1, inds2</span><br><span class="line"></span><br><span class="line">f2([<span class="number">1</span>,<span class="number">5</span>,<span class="number">-6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">-3</span>,<span class="number">-4</span>,<span class="number">8</span>,<span class="number">-9</span>,<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>时间复杂度$O(n^2)$</p>
</li>
</ol>
<ol start="3">
<li><p>分而治之</p>
<p><img src="/2019/02/28/computer science/数据结构第一讲：基本概念/WeChatWorkScreenshot_0e19ba0e-33b5-4c9b-acd2-34c90d48318f.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f3_0</span><span class="params">(a, l, u)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> l &gt; u:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> l == u:</span><br><span class="line">        <span class="keyword">return</span> max(a[l], <span class="number">0</span>)</span><br><span class="line">    mid = (l + u) // <span class="number">2</span></span><br><span class="line">    lmax = s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(mid, l<span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">        s += a[i]</span><br><span class="line">        lmax = max(lmax, s)</span><br><span class="line">    rmax = s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(mid+<span class="number">1</span>, u+<span class="number">1</span>):</span><br><span class="line">        s += a[i]</span><br><span class="line">        rmax = max(rmax, s)</span><br><span class="line">    <span class="keyword">return</span> max(lmax+rmax, f3_0(a, l, mid), f3_0(a, mid+<span class="number">1</span>, u))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f3</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> f3_0(a, <span class="number">0</span>, len(a)<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 求三个数最大值方法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getmax</span><span class="params">(x, y, z)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> (x &gt;= y) &amp; (x &gt;= z):</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> getmax(y, z, x)</span><br><span class="line"></span><br><span class="line">f3([<span class="number">1</span>,<span class="number">5</span>,<span class="number">-6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">-3</span>,<span class="number">-4</span>,<span class="number">8</span>,<span class="number">-9</span>,<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>
<ol start="4">
<li><p>在线处理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f4</span><span class="params">(a)</span>:</span></span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    t = <span class="number">0</span></span><br><span class="line">    inds1 = <span class="number">-1</span></span><br><span class="line">    inds2 = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        t = t + a[i]</span><br><span class="line">        <span class="keyword">if</span> t &gt;= s:</span><br><span class="line">            s = t</span><br><span class="line">            <span class="keyword">if</span> inds1 == <span class="number">-1</span>:</span><br><span class="line">                inds1 = i</span><br><span class="line">            inds2 = i</span><br><span class="line">        <span class="keyword">elif</span> t &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            t = <span class="number">0</span></span><br><span class="line">            inds1 = <span class="number">-1</span></span><br><span class="line">    <span class="keyword">return</span> s, inds1, inds2</span><br><span class="line"></span><br><span class="line">f4([<span class="number">1</span>,<span class="number">5</span>,<span class="number">-6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">-3</span>,<span class="number">-4</span>,<span class="number">8</span>,<span class="number">-9</span>,<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>在线处理的逻辑核心其实是一种链式增强的传播效应。</p>
<p>用索引指代对应的数，符号指代其正负（e.g. (0)+表示第一位为正数）。当（0）+，（0+1）+，那么必然有（0+1+2）&gt;=（1+2）。</p>
</li>
</ol>
<p>注意循环的边界，什么时候j+1,什么时候不要。从i开始还是i+1开始。</p>
<p>需要注意细节处理，条件是否取等号影响到是否取到的是最短子列，以上实现取到的都是最后出现的最短子列。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构第七讲：图（中）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构第七讲：图（中）/" class="post-title-link" itemprop="url">数据结构第七讲：图（中）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<h1 id="7-1-最短路径问题"><a href="#7-1-最短路径问题" class="headerlink" title="7.1 最短路径问题"></a>7.1 最短路径问题</h1><p><img src="/2019/02/28/computer science/数据结构第七讲：图（中）/WeChatWorkScreenshot_e3cfe696-50bb-47a7-a401-0f91ea23c9c8.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第七讲：图（中）/WeChatWorkScreenshot_681c3fda-ae9f-41cc-a6e0-2dab7048413f.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第七讲：图（中）/WeChatWorkScreenshot_0e865d38-ee00-4cf0-8b0f-f35539ac22ee.png" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构第二讲：线性结构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构第二讲：线性结构/" class="post-title-link" itemprop="url">数据结构第二讲：线性结构</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<p>在线课程 <a href="http://www.icourse163.org/course/ZJU-93001" target="_blank" rel="noopener">MOOC浙江大学数据结构课程</a></p>
<h1 id="2-1-线性表及其实现"><a href="#2-1-线性表及其实现" class="headerlink" title="2.1 线性表及其实现"></a>2.1 线性表及其实现</h1><h2 id="多项式表示"><a href="#多项式表示" class="headerlink" title="多项式表示"></a>多项式表示</h2><p>问题： 如何表示一个多项式？</p>
<p>方法：</p>
<ul>
<li><p>顺序存储结构直接表示</p>
<p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot1.png" alt></p>
</li>
<li><p>顺序存储结构表示非零项</p>
<p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot2.png" alt></p>
</li>
<li><p>链表结构存储非零项</p>
<p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot3.png" alt></p>
</li>
</ul>
<p>两个多项式相加过程：</p>
<ul>
<li>对于顺序存储直接表示，对应位相加即可</li>
<li>对于只存储非零项的情况，需要依次比较大小，寻找同指数项系数相加</li>
</ul>
<h2 id="链式存储和顺序存储的区别"><a href="#链式存储和顺序存储的区别" class="headerlink" title="链式存储和顺序存储的区别"></a>链式存储和顺序存储的区别</h2><p>顺序存储要求物理相邻</p>
<ul>
<li>求表长，$O(1)$</li>
<li>查找值， 遍历比对，时间复杂度$O(n)$</li>
<li>在指定位置插入值，先移动后面的值再插入，时间复杂度$O(n)$</li>
<li><p>删除指定位置的值，查找到后先删除再前移，时间复杂度$O(n)$</p>
<p>链式存储通过建立链来确定逻辑关系，不要求逻辑相邻</p>
</li>
<li><p>求表长，遍历i计数，时间复杂度$O(n)$</p>
</li>
<li>查找，遍历比对，时间复杂度$O(n)$</li>
<li>插入，先找到位置再插入，$O(n)$</li>
<li>删除，先找到位置再删除，$O(n)$</li>
</ul>
<h2 id="广义表"><a href="#广义表" class="headerlink" title="广义表"></a>广义表</h2><p>对于线性表而言，每个元素都是基本的单元素。在广义表中，这些元素不仅可以是单元素还可以是另一个广义表。</p>
<h1 id="2-2-堆栈"><a href="#2-2-堆栈" class="headerlink" title="2.2 堆栈"></a>2.2 堆栈</h1><p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot4.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot5.png" alt></p>
<h2 id="顺序存储实现堆栈"><a href="#顺序存储实现堆栈" class="headerlink" title="顺序存储实现堆栈"></a>顺序存储实现堆栈</h2><p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot9.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot6.png" alt></p>
<p>头部和尾部只是个概念，数组的两端完全可以做栈底。</p>
<h2 id="单向链表实现堆栈"><a href="#单向链表实现堆栈" class="headerlink" title="单向链表实现堆栈"></a>单向链表实现堆栈</h2><p>栈顶指针Top只能在链表头。因为如果在链表尾，一旦执行删除操作，单向链表没有办法找到该结点前一个位置。</p>
<h2 id="中缀表达式转成后缀表达式"><a href="#中缀表达式转成后缀表达式" class="headerlink" title="中缀表达式转成后缀表达式"></a>中缀表达式转成后缀表达式</h2><p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot10.png" alt></p>
<h1 id="2-3-队列的实现"><a href="#2-3-队列的实现" class="headerlink" title="2.3 队列的实现"></a>2.3 队列的实现</h1><h2 id="什么是队列"><a href="#什么是队列" class="headerlink" title="什么是队列"></a>什么是队列</h2><p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot7.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第二讲：线性结构/snapshot8.png" alt></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构第五讲：树（下）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构第五讲：树（下）/" class="post-title-link" itemprop="url">数据结构第五讲：树（下）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<h1 id="5-1-堆"><a href="#5-1-堆" class="headerlink" title="5.1 堆"></a>5.1 堆</h1><h2 id="什么是堆"><a href="#什么是堆" class="headerlink" title="什么是堆"></a>什么是堆</h2><p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_3289f3ee-c82e-4e99-af18-b43b39563a8c.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_3b49bd7e-42d9-47cf-b6d9-29e91ceb9ae4.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_33041162-b624-4a7c-a7fe-33f6163523d8.png" alt></p>
<h2 id="最大堆的插入"><a href="#最大堆的插入" class="headerlink" title="最大堆的插入"></a>最大堆的插入</h2><p>思路：</p>
<ol>
<li>将插入值放到末尾</li>
<li>比较其于父结点的大小关系，如果大于父结点，则交换位置，循环往复直至root，小于则直接停止。</li>
</ol>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_23aff623-e519-48b1-abb1-4855ab9f3632.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_31fab5fe-c7d9-43b3-8049-bb4a7ff8565f.png" alt></p>
<p><strong><em>用完全二叉树可以直接定位父结点下标</em></strong></p>
<h2 id="最大堆的删除"><a href="#最大堆的删除" class="headerlink" title="最大堆的删除"></a>最大堆的删除</h2><p>思路：</p>
<ol>
<li>删除root，同时将二叉树最后一个结点放到root补位</li>
<li>取其左右儿子中大的和其进行比较，如果大于则交换位置，循环往复直至叶结点，不然直接停止。</li>
</ol>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_54b26e3a-a1bb-4660-9e7c-6c3957709c79.png" alt></p>
<h2 id="最大堆的建立"><a href="#最大堆的建立" class="headerlink" title="最大堆的建立"></a>最大堆的建立</h2><p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_4d7c8299-a239-46c2-b06e-f044adc52d78.png" alt></p>
<p>方法一：</p>
<p>复杂度[TBC]</p>
<p>方法二思路：</p>
<ol>
<li>从最后一个非叶子结点开始，把这颗子树调成一个堆，循环往复，直到root。</li>
</ol>
<p>每个非叶子结点的调整过程最坏情况下挪动元素次数是它的高度。因此<strong><em>建堆时，最坏情况下需要挪动元素次数是等于树中各结点的高度和</em></strong>。</p>
<h1 id="5-2-哈夫曼树与哈夫曼编码"><a href="#5-2-哈夫曼树与哈夫曼编码" class="headerlink" title="5.2 哈夫曼树与哈夫曼编码"></a>5.2 哈夫曼树与哈夫曼编码</h1><h2 id="什么是huffman树"><a href="#什么是huffman树" class="headerlink" title="什么是huffman树"></a>什么是huffman树</h2><p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_b5c89c3e-1abf-4156-97ff-a53695ed7292.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_db47f2f5-f1e5-4c53-9b1d-7ae1675f2162.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_f72a8205-b323-408b-a97d-39520a3f7af8.png" alt></p>
<h2 id="huffman树的构造"><a href="#huffman树的构造" class="headerlink" title="huffman树的构造"></a>huffman树的构造</h2><p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_9608bb2c-95f9-437a-91a2-91ca70d2b675.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_d9c359e1-59c8-4a82-93d8-19908682e3d7.png" alt></p>
<p>[TBC]如何利用堆构造、复杂度？</p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_a83be7f2-7fa8-4974-b910-e91fd7705bb0.png" alt></p>
<h2 id="huffman编码"><a href="#huffman编码" class="headerlink" title="huffman编码"></a>huffman编码</h2><p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_8f1d628c-6f21-4cb8-b13f-e46198e23dfb.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_ba7c8a23-87dd-4e16-9810-0ce60b280c85.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_b1cb5e48-8de0-4731-92b0-a1f987667e80.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_dd5055f9-0bc5-4f5b-ad9b-6173871636b4.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第五讲：树（下）/WeChatWorkScreenshot_c55b6ade-d119-4f0f-b936-5b3f95b7819e.png" alt></p>
<h1 id="5-3-集合及运算"><a href="#5-3-集合及运算" class="headerlink" title="5.3 集合及运算"></a>5.3 集合及运算</h1><h2 id="集合的表示"><a href="#集合的表示" class="headerlink" title="集合的表示"></a>集合的表示</h2><h3 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h3><h1 id="5-4-小白专场：堆中的路径"><a href="#5-4-小白专场：堆中的路径" class="headerlink" title="5.4 小白专场：堆中的路径"></a>5.4 小白专场：堆中的路径</h1>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构第六讲：图（上）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构第六讲：图（上）/" class="post-title-link" itemprop="url">数据结构第六讲：图（上）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<h1 id="6-1-什么是图"><a href="#6-1-什么是图" class="headerlink" title="6.1 什么是图"></a>6.1 什么是图</h1><h2 id="什么是图"><a href="#什么是图" class="headerlink" title="什么是图"></a>什么是图</h2><p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_c7fcac49-aacc-4536-87f0-41290b1bcd99.png" alt></p>
<h2 id="怎么在程序中表示一个图"><a href="#怎么在程序中表示一个图" class="headerlink" title="怎么在程序中表示一个图"></a>怎么在程序中表示一个图</h2><h3 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h3><p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_e9f58c04-90d7-4c77-ae53-2c3b1f3bae71.png" alt></p>
<p>找到Gij在数组中的对应下标很容易，反过来貌似还是挺困难的。</p>
<p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_03c47946-c578-42ce-8a99-69da668ed32f.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_ae81bc11-e050-4ea9-874f-7bcd4c6c0a3c.png" alt></p>
<h3 id="邻接表"><a href="#邻接表" class="headerlink" title="邻接表"></a>邻接表</h3><p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_9834bbbc-ca71-4e0b-a83c-cc11e021c270.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_7806b1c1-b89c-46b4-816d-df8f8d9fd021.png" alt></p>
<h1 id="6-2-图的遍历"><a href="#6-2-图的遍历" class="headerlink" title="6.2 图的遍历"></a>6.2 图的遍历</h1><h2 id="深度优先搜索（DFS）"><a href="#深度优先搜索（DFS）" class="headerlink" title="深度优先搜索（DFS）"></a>深度优先搜索（DFS）</h2><p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_5091029a-e121-49f4-abf2-01bc93c956b4.png" alt></p>
<p>对于邻接表，N个顶点需要遍历，每个顶点只需要遍历该链表上的结点，也就是一共2E（一条边会被在不同的链表各存一次）个结点，所以是O(N+2E)</p>
<p>对于邻接矩阵，每个顶点都需要遍历，而对于每个顶点，都需要遍历它和所有其他顶点的对应值才能知道是否是邻接点，因此是$O(N^2)$</p>
<h2 id="广度优先搜索（BFS）"><a href="#广度优先搜索（BFS）" class="headerlink" title="广度优先搜索（BFS）"></a>广度优先搜索（BFS）</h2><p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_409ccee1-0b02-4748-a06c-e37a1cff9992.png" alt></p>
<p><strong><em>类似于层序遍历</em></strong></p>
<h2 id="为什么需要两种遍历？"><a href="#为什么需要两种遍历？" class="headerlink" title="为什么需要两种遍历？"></a>为什么需要两种遍历？</h2><p>不同的情况下不同的遍历方式会更有优势</p>
<h2 id="图不连通怎么办？"><a href="#图不连通怎么办？" class="headerlink" title="图不连通怎么办？"></a>图不连通怎么办？</h2><p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_11108cd4-3a89-4e55-b45d-c71fe8091371.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_d9d5dd92-5189-4e74-81fa-639be5a81ab3.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_c7c0618b-b075-4eec-afc2-da2efdb68a5d.png" alt></p>
<p>强连通图依旧是有向图，虽然任意两顶点之间都可以互通往来，存在性质上的区别，不能和无向图中的连通图混为一谈。</p>
<p><img src="/2019/02/28/computer science/数据结构第六讲：图（上）/WeChatWorkScreenshot_20d1014f-6fe8-48f2-8c6a-7d2801717104.png" alt></p>
<p>对于非连通图，需要遍历所有顶点去实现bfs或者dfs，对于连通图，只需要从一个初始点出发就可以。</p>
<h1 id="6-3-应用实例：拯救007"><a href="#6-3-应用实例：拯救007" class="headerlink" title="6.3 应用实例：拯救007"></a>6.3 应用实例：拯救007</h1><h1 id="6-4-应用实例：六度空间"><a href="#6-4-应用实例：六度空间" class="headerlink" title="6.4 应用实例：六度空间"></a>6.4 应用实例：六度空间</h1><h1 id="小白专场：如何建立图"><a href="#小白专场：如何建立图" class="headerlink" title="小白专场：如何建立图"></a>小白专场：如何建立图</h1>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/computer science/数据结构第四讲：树（中）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/computer science/数据结构第四讲：树（中）/" class="post-title-link" itemprop="url">数据结构第四讲：树（中）</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/computer-science/" itemprop="url" rel="index"><span itemprop="name">computer science</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <script type"text javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>

<h1 id="4-1-二叉搜索树"><a href="#4-1-二叉搜索树" class="headerlink" title="4.1 二叉搜索树"></a>4.1 二叉搜索树</h1><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_86dfa817-d1d2-4d83-8b03-d32e596c4355.png" alt></p>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_0b1f7ed1-8032-4320-b4e9-b1a0db3004ec.png" alt></p>
<p>最小元素在树的最左边，最大元素在树的最右边</p>
<p>从根结点开始，利用递归进行查找。</p>
<h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_9d65b83e-4a78-40df-be7a-84faedb9e125.png" alt></p>
<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><ol>
<li><p>如果是叶节点，直接删</p>
</li>
<li><p>如果只有一颗子树，直接拉出来补位</p>
</li>
<li><p>有两颗子树</p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_01a42871-d5d4-4e32-8100-d040a102566b.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_b4e58b26-014e-4ff7-b212-460960e59c12.png" alt></p>
<p>这样的好处是替代结点最多只有一颗子树，变动小</p>
</li>
</ol>
<h1 id="4-2-平衡二叉树"><a href="#4-2-平衡二叉树" class="headerlink" title="4.2 平衡二叉树"></a>4.2 平衡二叉树</h1><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_a8235f41-f748-45bd-a0e7-8943f0e3f6fb.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_f851ca6e-92e4-4c71-b2dd-2c98febd312b.png" alt></p>
<p><strong><em>每个结点都有一个平衡因子，是两个子树树深之差</em></strong></p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_ee0be889-fefb-4020-8647-19406f707731.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_7402d26d-0f4f-4bad-a51d-76e0c6887192.png" alt></p>
<h2 id="平衡二叉树的调整"><a href="#平衡二叉树的调整" class="headerlink" title="平衡二叉树的调整"></a>平衡二叉树的调整</h2><h3 id="RR旋转"><a href="#RR旋转" class="headerlink" title="RR旋转"></a>RR旋转</h3><p>破坏者插入在发现者的右子树的右子树上</p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_5f2c3e55-07d9-4dbd-b473-0b6dcf1086ad.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_c913e123-c96c-44a3-a8ee-53a9a0ed7dda.png" alt></p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_9823f2fa-4348-4507-b757-6b0b9c5113e6.png" alt></p>
<h3 id="LL旋转"><a href="#LL旋转" class="headerlink" title="LL旋转"></a>LL旋转</h3><p>破坏者插入在发现者的左子树的左子树上</p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_30547a1a-e6bf-44cd-baba-211bd5a11035.png" alt></p>
<h3 id="LR旋转"><a href="#LR旋转" class="headerlink" title="LR旋转"></a>LR旋转</h3><p>破坏者插入在发现者的左子树的右子树上</p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_2f19af83-199c-4cc1-b626-cb5573abef1d.png" alt></p>
<h3 id="RL旋转"><a href="#RL旋转" class="headerlink" title="RL旋转"></a>RL旋转</h3><p>破坏者插入在发现者的右子树的左子树上</p>
<p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_525dd0ef-c82f-49a3-a402-dc778e909092.png" alt></p>
<h1 id="4-3-小白专场：是否同一个二叉搜索树"><a href="#4-3-小白专场：是否同一个二叉搜索树" class="headerlink" title="4.3 小白专场：是否同一个二叉搜索树"></a>4.3 小白专场：是否同一个二叉搜索树</h1><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_433f769e-e1d7-4252-a6bf-3a8d6e18b223.png" alt></p>
<h2 id="不建树的判别方法"><a href="#不建树的判别方法" class="headerlink" title="不建树的判别方法"></a>不建树的判别方法</h2><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_c75e3bee-0e7d-415a-ad0e-3f5d6a31a2d1.png" alt></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">t1 = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]</span><br><span class="line">t2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cmpr</span><span class="params">(t1, t2)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        t1_root = t1.pop(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        t1_root = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        t2_root = t2.pop(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        t2_root = <span class="keyword">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (t1_root <span class="keyword">is</span> <span class="keyword">None</span>) &amp; (t2_root <span class="keyword">is</span> <span class="keyword">None</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> (t1_root <span class="keyword">is</span> <span class="keyword">None</span>) | (t2_root <span class="keyword">is</span> <span class="keyword">None</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> t1_root != t2_root:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    left_t1 = [i <span class="keyword">for</span> i <span class="keyword">in</span> t1 <span class="keyword">if</span> i &lt; t1_root]</span><br><span class="line">    right_t1 = [i <span class="keyword">for</span> i <span class="keyword">in</span> t1 <span class="keyword">if</span> i &gt; t1_root]</span><br><span class="line">    </span><br><span class="line">    left_t2 = [i <span class="keyword">for</span> i <span class="keyword">in</span> t2 <span class="keyword">if</span> i &lt; t2_root]</span><br><span class="line">    right_t2 = [i <span class="keyword">for</span> i <span class="keyword">in</span> t2 <span class="keyword">if</span> i &gt; t2_root]</span><br><span class="line">    </span><br><span class="line">    res1 = cmpr(left_t1, left_t2)</span><br><span class="line">    res2 = cmpr(right_t1, right_t2)</span><br><span class="line">    res = min(res1, res2)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">cmpr(t1, t2)</span><br></pre></td></tr></table></figure>
<h2 id="建一棵树，再判别其他序列是否与该树一致"><a href="#建一棵树，再判别其他序列是否与该树一致" class="headerlink" title="建一棵树，再判别其他序列是否与该树一致"></a>建一棵树，再判别其他序列是否与该树一致</h2><p><img src="/2019/02/28/computer science/数据结构第四讲：树（中）/WeChatWorkScreenshot_e284a753-0cd1-480d-abcb-7ad45e461085.png" alt></p>
<h1 id="线性结构之习题选讲"><a href="#线性结构之习题选讲" class="headerlink" title="线性结构之习题选讲"></a>线性结构之习题选讲</h1><h2 id="逆转链表"><a href="#逆转链表" class="headerlink" title="逆转链表"></a>逆转链表</h2><h3 id="反转前k个"><a href="#反转前k个" class="headerlink" title="反转前k个"></a>反转前k个</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        self.value=x</span><br><span class="line">        self.next=<span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># head = ListNode(0)</span></span><br><span class="line">p1 = ListNode(<span class="number">1</span>)</span><br><span class="line">p2 = ListNode(<span class="number">2</span>)</span><br><span class="line">p3 = ListNode(<span class="number">3</span>)</span><br><span class="line">p4 = ListNode(<span class="number">4</span>)</span><br><span class="line">p5 = ListNode(<span class="number">5</span>)</span><br><span class="line">p6 = ListNode(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># head.next = p1</span></span><br><span class="line">p1.next = p2</span><br><span class="line">p2.next = p3</span><br><span class="line">p3.next = p4</span><br><span class="line">p4.next = p5</span><br><span class="line">p5.next = p6</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inverselist</span><span class="params">(p, k)</span>:</span></span><br><span class="line">    head = ListNode(x = <span class="keyword">None</span>)</span><br><span class="line">    head.next = p.next</span><br><span class="line">    tmp = p.next</span><br><span class="line">    tmp2 = p</span><br><span class="line">    <span class="keyword">if</span> k &gt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">while</span> k &gt; <span class="number">1</span>:</span><br><span class="line">            tmp = head.next</span><br><span class="line">            head.next = head.next.next</span><br><span class="line">            tmp.next = tmp2</span><br><span class="line">            tmp2 = tmp</span><br><span class="line">            k -= <span class="number">1</span></span><br><span class="line">        p.next = head.next</span><br><span class="line">        head.next = tmp</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    <span class="keyword">return</span> p</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">travesal</span><span class="params">(head)</span>:</span></span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">while</span> head.next <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">if</span> head.value <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            res.append(head.value)</span><br><span class="line">        head = head.next</span><br><span class="line">    res.append(head.value)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">head = inverselist(p1, <span class="number">1</span>)</span><br><span class="line">travesal(head)</span><br></pre></td></tr></table></figure>
<h3 id="全部反转"><a href="#全部反转" class="headerlink" title="全部反转"></a>全部反转</h3><h4 id="循环解法"><a href="#循环解法" class="headerlink" title="循环解法"></a>循环解法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        self.value=x</span><br><span class="line">        self.next=<span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># head = ListNode(0)</span></span><br><span class="line">p1 = ListNode(<span class="number">1</span>)</span><br><span class="line">p2 = ListNode(<span class="number">2</span>)</span><br><span class="line">p3 = ListNode(<span class="number">3</span>)</span><br><span class="line">p4 = ListNode(<span class="number">4</span>)</span><br><span class="line">p5 = ListNode(<span class="number">5</span>)</span><br><span class="line">p6 = ListNode(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># head.next = p1</span></span><br><span class="line">p1.next = p2</span><br><span class="line">p2.next = p3</span><br><span class="line">p3.next = p4</span><br><span class="line">p4.next = p5</span><br><span class="line">p5.next = p6</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">travesal</span><span class="params">(head)</span>:</span></span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">while</span> head.next <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">if</span> head.value <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            res.append(head.value)</span><br><span class="line">        head = head.next</span><br><span class="line">    res.append(head.value)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inverselist1</span><span class="params">(p)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> p <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> p.next <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> p</span><br><span class="line">    </span><br><span class="line">    cur = p.next</span><br><span class="line">    pre = p</span><br><span class="line">    p.next = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">while</span> cur.next <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        tmp = cur.next</span><br><span class="line">        cur.next = pre</span><br><span class="line">        pre = cur</span><br><span class="line">        cur = tmp</span><br><span class="line">    cur.next = pre</span><br><span class="line">    <span class="keyword">return</span> cur</span><br><span class="line"></span><br><span class="line">head = inverselist1(p1)</span><br><span class="line">travesal(head)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inverselist2</span><span class="params">(p)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> p <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> p.next <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> p</span><br><span class="line">    </span><br><span class="line">    cur = p.next</span><br><span class="line">    pre = p</span><br><span class="line">    p.next = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">while</span> cur <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        h = cur</span><br><span class="line">        tmp = cur.next</span><br><span class="line">        cur.next = pre</span><br><span class="line">        pre = cur</span><br><span class="line">        cur = tmp</span><br><span class="line">    <span class="keyword">return</span> h</span><br><span class="line"></span><br><span class="line">head = inverselist2(p1)</span><br><span class="line">travesal(head)</span><br></pre></td></tr></table></figure>
<h4 id="递归解法"><a href="#递归解法" class="headerlink" title="递归解法"></a>递归解法</h4><p>[TBC]</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/python/class & instance/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/python/class & instance/" class="post-title-link" itemprop="url">class & instance</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="class-amp-instance"><a href="#class-amp-instance" class="headerlink" title="class &amp; instance"></a>class &amp; instance</h1><h2 id="class-amp-instance-1"><a href="#class-amp-instance-1" class="headerlink" title="class &amp; instance"></a>class &amp; instance</h2><p>类是一个模板，对它赋属性值调用以后就是具体的对象——实例。</p>
<p>通过在类中定义方法（函数），然后通过实例去直接调用方法，就可以直接操作对象内部数据。</p>
<h2 id="私有变量"><a href="#私有变量" class="headerlink" title="私有变量"></a>私有变量</h2><p>通过在属性的名称前加上两个下划线__，就变成了私有变量，外部无法访问。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="title">object</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>, name, score)</span></span><span class="symbol">:</span></span><br><span class="line">        <span class="keyword">self</span>.__name = name</span><br><span class="line">        <span class="keyword">self</span>.__score = score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_score</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></span><br><span class="line">        print(<span class="string">'%s: %s'</span> % (<span class="keyword">self</span>.__name, <span class="keyword">self</span>.__score))</span><br></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; bart = Student(<span class="string">'Bart Simpson'</span>, <span class="number">98</span>)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; bart.__name</span><br><span class="line">Traceback (most recent call last)<span class="symbol">:</span></span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;<span class="class"><span class="keyword">module</span>&gt;</span></span><br><span class="line"><span class="symbol">AttributeError:</span> <span class="string">'Student'</span> object has no attribute <span class="string">'__name'</span></span><br></pre></td></tr></table></figure>
<p>这样就确保了外部代码不能随意修改对象内部的状态，这样通过访问限制的保护，代码更加健壮。</p>
<p>但是，以双下划线开头并结尾的是特殊变量，而非私有变量，是可以直接访问的。</p>
<p>有些时候，你会看到以单下划线开头的实例变量，这样的实例变量是可以访问的，但是，按照约定俗成的约定，当你看到这样的变量时，意思就是，“虽然我可以被访问，但是，请把我视为私有变量，不要随意访问”。</p>
<h2 id="魔术方法"><a href="#魔术方法" class="headerlink" title="魔术方法"></a>魔术方法</h2><p>写于类中，定义对象时会被自动调用。例如 <code>def __init__():</code></p>
<p>它们经常是两个下划线包围来命名的（比如 <code>__init__，__lt__</code>）</p>
<h1 id="references"><a href="#references" class="headerlink" title="references"></a>references</h1><p><a href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014318650247930b1b21d7d3c64fe38c4b5a80d4469ad7000" target="_blank" rel="noopener">廖雪峰python</a></p>
<p><a href="http://www.cnblogs.com/styier/p/6111370.html" target="_blank" rel="noopener">Python中的魔法方法</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/python/classmethod&staticmethod/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/python/classmethod&staticmethod/" class="post-title-link" itemprop="url">classmethod&staticmethod</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="instance-method"><a href="#instance-method" class="headerlink" title="instance method"></a>instance method</h1><p>class 中最常用的是实例方法：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cls</span>(<span class="title">object</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>.params)</span></span><span class="symbol">:</span></span><br><span class="line">        <span class="keyword">self</span>.params = params</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></span><br><span class="line">        print(<span class="keyword">self</span>.params)</span><br></pre></td></tr></table></figure>
<h1 id="classmethod"><a href="#classmethod" class="headerlink" title="classmethod"></a>classmethod</h1><p>但如果我们需要一些和类直接交互而不是和实例交互的方法怎么办呢？可以将之放在class外面单独形成一个函数，但是这样不易于代码整洁和管理。此时，可以使用类方法：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cls</span>(<span class="title">object</span>):</span></span><br><span class="line">    inst = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>.params)</span></span><span class="symbol">:</span></span><br><span class="line">        <span class="keyword">self</span>.params = params</span><br><span class="line">        cls.inst = <span class="class"><span class="keyword">class</span>.<span class="title">inst</span> +1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></span><br><span class="line">        print(<span class="keyword">self</span>.params)</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_inst</span><span class="params">(cls_obj)</span></span><span class="symbol">:</span></span><br><span class="line">        <span class="keyword">return</span> cls_obj.inst</span><br><span class="line"></span><br><span class="line">ik1 = cls()</span><br><span class="line">ik2 = cls()</span><br><span class="line">print(ik1.get_inst())</span><br><span class="line">print(cls.get_inst())</span><br></pre></td></tr></table></figure>
<p>注意，上面的两个输出都是2！</p>
<p>classmethod是需要传参数的，但是不是self。</p>
<h1 id="staticmethod"><a href="#staticmethod" class="headerlink" title="staticmethod"></a>staticmethod</h1><p>另一方面，有时需要一些和class有关但是有不需要实例和类参与的方法。这种情况应该是最为常见的！此时，可以使用staticmethod：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cls</span>(<span class="title">object</span>):</span></span><br><span class="line">    inst = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(<span class="keyword">self</span>.params)</span></span><span class="symbol">:</span></span><br><span class="line">        <span class="keyword">self</span>.params = params</span><br><span class="line">        cls.inst = <span class="class"><span class="keyword">class</span>.<span class="title">inst</span> +1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></span><br><span class="line">        print(<span class="keyword">self</span>.params)</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_inst</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>staticmethod不需要传参数！</p>
<h1 id="references"><a href="#references" class="headerlink" title="references"></a>references</h1><p><a href="https://www.zhihu.com/question/20021164" target="_blank" rel="noopener">Python 中的 classmethod 和 staticmethod 有什么具体用途？</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/python/discuss/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/python/discuss/" class="post-title-link" itemprop="url">discuss</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="the-differences-between-package-and-module"><a href="#the-differences-between-package-and-module" class="headerlink" title="the differences between package and module"></a>the differences between package and module</h1><ul>
<li>the <strong>name</strong> of module from where?</li>
</ul>
<h1 id="the-effects-of-init-py"><a href="#the-effects-of-init-py" class="headerlink" title="the effects of init.py"></a>the effects of <strong>init</strong>.py</h1><h1 id="the-process-of-import"><a href="#the-process-of-import" class="headerlink" title="the process of import"></a>the process of import</h1><h1 id="the-meanings-of-and"><a href="#the-meanings-of-and" class="headerlink" title="the meanings of _ and __"></a>the meanings of _ and __</h1><h1 id="if-name-‘main‘"><a href="#if-name-‘main‘" class="headerlink" title="if name == ‘main‘"></a>if <strong>name</strong> == ‘<strong>main</strong>‘</h1><h1 id="class中def如果是做有关self修改，可以不需要return。而self自己就会变化么？"><a href="#class中def如果是做有关self修改，可以不需要return。而self自己就会变化么？" class="headerlink" title="class中def如果是做有关self修改，可以不需要return。而self自己就会变化么？"></a>class中def如果是做有关self修改，可以不需要return。而self自己就会变化么？</h1>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/python/json dump/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/python/json dump/" class="post-title-link" itemprop="url">json dump</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在使用json.dumps时遇到报错<code>TypeError: Object of type &#39;float32&#39; is not JSON serializable</code>。</p>
<p>google后找到方法 <a href="https://stackoverflow.com/questions/27050108/convert-numpy-type-to-python" target="_blank" rel="noopener">Convert numpy type to python</a>。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> MyEncoder(json.JSONEncoder):</span><br><span class="line">    <span class="keyword">def</span> <span class="keyword">default</span>(self, obj):</span><br><span class="line">        <span class="keyword">if</span> isinstance(obj, numpy.integer):</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">int</span>(obj)</span><br><span class="line">        elif isinstance(obj, numpy.floating):</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">float</span>(obj)</span><br><span class="line">        elif isinstance(obj, numpy.ndarray):</span><br><span class="line">            <span class="keyword">return</span> obj.<span class="keyword">tolist</span>()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">super</span>(MyEncoder, self).<span class="keyword">default</span>(obj)</span><br><span class="line"></span><br><span class="line">json.dumps(numpy.float32(<span class="number">1.2</span>), cls=MyEncoder)</span><br><span class="line">json.dumps(numpy.arange(<span class="number">12</span>), cls=MyEncoder)</span><br><span class="line">json.<span class="keyword">dump</span>(&#123;<span class="string">'a'</span>: numpy.int32(<span class="number">42</span>)&#125;，fp,cls=MyEncoder)</span><br></pre></td></tr></table></figure>
<p>我的理解是<code>np.int</code>/<code>np.float</code>/<code>np.array</code>这样的数据格式不支持json serializable，而python自身的<code>int</code>/<code>float</code>/<code>list</code>是支持的。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/python/log/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/python/log/" class="post-title-link" itemprop="url">log</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文主要讲述如何抓取python脚本产生的log。</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import logging</span><br><span class="line"></span><br><span class="line"><span class="meta"># 将logging专有化，避免和引用第三方模块的logging冲突。</span></span><br><span class="line">logger = logging.getLogger(‘test’)  </span><br><span class="line">logger.setLevel(logging.INFO) </span><br><span class="line"></span><br><span class="line"><span class="meta"># 创建一个handler，用于写入日志文件    </span></span><br><span class="line">fh = logging.FileHandler(<span class="string">'/tmp/test.log'</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="meta"># 再创建一个handler，用于输出到控制台    </span></span><br><span class="line">ch = logging.StreamHandler()  </span><br><span class="line">  </span><br><span class="line"><span class="meta"># 定义handler的输出格式formatter    </span></span><br><span class="line">formatter = logging.Formatter(<span class="string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>)  </span><br><span class="line">fh.setFormatter(formatter)  </span><br><span class="line">ch.setFormatter(formatter) </span><br><span class="line"></span><br><span class="line"><span class="meta"># 将定义好的console日志handler添加到logger  </span></span><br><span class="line">logger.addHandler(fh)  </span><br><span class="line">logger.addHandler(ch)</span><br><span class="line"></span><br><span class="line"><span class="meta"># 记录日志    </span></span><br><span class="line">logger.debug(<span class="string">'logger debug message'</span>)  </span><br><span class="line">logger.info(<span class="string">'logger info message'</span>)  </span><br><span class="line">logger.warning(<span class="string">'logger warning message'</span>)  </span><br><span class="line">logger.error(<span class="string">'logger error message'</span>)  </span><br><span class="line">logger.critical(<span class="string">'logger critical message'</span>)</span><br></pre></td></tr></table></figure>
<p>注意，在这种方法下print信息应该不会被logging抓取到。</p>
<p>有时候，我们希望抓取xgb运行过程中的精度反馈信息，可以采用子进程的方法进行抓取。子进程print在console的信息都可以被父进程抓取到。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将子进程信息抓取到文件</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(log_path,<span class="string">'ab'</span>) <span class="keyword">as</span> log_file:</span><br><span class="line">    <span class="built_in">process</span> = subprocess.Popen(cmd, <span class="keyword">stdout</span>=log_file, <span class="keyword">stderr</span>=subprocess.STDOUT)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将子进程信息实时抓取到内存</span></span><br><span class="line"><span class="built_in">process</span> = subprocess.Popen(cmd, <span class="keyword">stdout</span>=subprocess.PIPE, <span class="keyword">stderr</span>=subprocess.STDOUT)</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">line</span> <span class="keyword">in</span> iter(<span class="built_in">process</span>.<span class="keyword">stdout</span>.readline, b<span class="string">''</span>):</span><br><span class="line">    print(<span class="built_in">line</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待进程结束，不然block。用于防止直接运行下方codes </span></span><br><span class="line"><span class="built_in">process</span>.<span class="built_in">wait</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 另一种写法（好像并没有什么差别。同事用的，我更倾向上一种）</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">process</span>.poll() is None:</span><br><span class="line">    <span class="built_in">time</span>.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<p>有时，我们希望子进程信息直接输出到控制台（这可能只是表象，具体是怎样的机制或说该怎样表述不清楚。。），那么可以直接调用<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">subprocess.call(<span class="keyword">cmd</span><span class="bash">)</span></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">subprocess.Popen(<span class="keyword">cmd</span><span class="bash">)</span></span><br></pre></td></tr></table></figure></p>
<p>当子进程本身也包含子进程时，我们也可以用以上方法使log汇总到最上层子进程上面，然后根据具体需求在父进程代码中选择相应的方法进行处理。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.muzhen.tk/2019/02/28/python/pandas常用技巧/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="muzhen">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="the Home of MuZhen">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/28/python/pandas常用技巧/" class="post-title-link" itemprop="url">pandas常用技巧</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-28 20:45:06" itemprop="dateCreated datePublished" datetime="2019-02-28T20:45:06+08:00">2019-02-28</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="df去除取值只有一种或空值的列"><a href="#df去除取值只有一种或空值的列" class="headerlink" title="df去除取值只有一种或空值的列"></a>df去除取值只有一种或空值的列</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">indices = df.apply(pd.Series.nunique)</span><br><span class="line">df= df[indices[indices&gt;<span class="number">1</span>].index]</span><br></pre></td></tr></table></figure>
<p>以下方法更高效，但是只能去除常数列，无法去除空值列或者只有一种取值和空值的列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df = df.loc[:, (df != df.ix[<span class="number">0</span>]).any()]</span><br></pre></td></tr></table></figure>
<h1 id="将一列中的文本拆分为多行"><a href="#将一列中的文本拆分为多行" class="headerlink" title="将一列中的文本拆分为多行"></a>将一列中的文本拆分为多行</h1><p><a href="https://zhuanlan.zhihu.com/p/28337202" target="_blank" rel="noopener">Pandas: 如何将一列中的文本拆分为多行？</a></p>
<h1 id="将一列转换为多列"><a href="#将一列转换为多列" class="headerlink" title="将一列转换为多列"></a>将一列转换为多列</h1><p>该列元素为字典。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[col].apply(pd.Series)</span><br></pre></td></tr></table></figure>
<p>如果是json，需要先转成字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df[col].map(<span class="keyword">lambda</span> s:json.loads(s)).apply(pd.Series)</span><br></pre></td></tr></table></figure>
<h1 id="自动转换各列相应数据类型"><a href="#自动转换各列相应数据类型" class="headerlink" title="自动转换各列相应数据类型"></a>自动转换各列相应数据类型</h1><p><a href="https://stackoverflow.com/questions/15891038/change-data-type-of-columns-in-pandas" target="_blank" rel="noopener">Change data type of columns in Pandas</a></p>
<p>类型转换函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pandas.to_datetime : Convert argument to datetime.</span><br><span class="line">pandas.to_timedelta : Convert argument to timedelta.</span><br><span class="line">pandas.to_numeric : Return a fixed frequency timedelta index, <span class="keyword">with</span> day <span class="keyword">as</span> the default.</span><br></pre></td></tr></table></figure>
<p>Individual column / Series</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = pd.Series([<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'4.7'</span>, <span class="string">'pandas'</span>, <span class="string">'10'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s</span><br><span class="line"><span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">2</span>       <span class="number">4.7</span></span><br><span class="line"><span class="number">3</span>    pandas</span><br><span class="line"><span class="number">4</span>        <span class="number">10</span></span><br><span class="line">dtype: object</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 默参为raise，无法转换会报错</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_numeric(s, errors=<span class="string">'raise'</span>) <span class="comment"># or pd.to_numeric(s, errors='raise')</span></span><br><span class="line">ValueError: Unable to parse string</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 不符合类型的会强制转换成nan</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_numeric(s, errors=<span class="string">'coerce'</span>)</span><br><span class="line"><span class="number">0</span>     <span class="number">1.0</span></span><br><span class="line"><span class="number">1</span>     <span class="number">2.0</span></span><br><span class="line"><span class="number">2</span>     <span class="number">4.7</span></span><br><span class="line"><span class="number">3</span>     NaN</span><br><span class="line"><span class="number">4</span>    <span class="number">10.0</span></span><br><span class="line">dtype: float64</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 无法转换则返回原数据</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pd.to_numeric(s, errors=<span class="string">'ignore'</span>)</span><br><span class="line"><span class="number">0</span>         <span class="number">1</span></span><br><span class="line"><span class="number">1</span>         <span class="number">2</span></span><br><span class="line"><span class="number">2</span>       <span class="number">4.7</span></span><br><span class="line"><span class="number">3</span>    pandas</span><br><span class="line"><span class="number">4</span>        <span class="number">10</span></span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure>
<p>Multiple columns / entire DataFrames</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用apply方法</span></span><br><span class="line">df.apply(pd.to_numeric, errors=<span class="string">'ignore'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用convert_objects方法， 如果conver_numeric为True,只要一列里面有一个数字就会转为numeric相关类型，字符串会全部变成nan</span></span><br><span class="line">df.convert_objects(convert_numeric=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="df全局替换子串"><a href="#df全局替换子串" class="headerlink" title="df全局替换子串"></a>df全局替换子串</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dictionary为一个替换映射字典</span></span><br><span class="line">df.replace(dictionary, regex=<span class="keyword">True</span>, inplace=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="判断df-columns类型"><a href="#判断df-columns类型" class="headerlink" title="判断df columns类型"></a>判断df columns类型</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pandas 0.20.2</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas.api.types <span class="keyword">import</span> is_string_dtype</span><br><span class="line"><span class="keyword">from</span> pandas.api.types <span class="keyword">import</span> is_numeric_dtype</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">'A'</span>: [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="string">'B'</span>: [<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>]&#125;)</span><br><span class="line"></span><br><span class="line">is_string_dtype(df[<span class="string">'A'</span>])</span><br><span class="line">&gt;&gt;&gt;&gt; <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">is_numeric_dtype(df[<span class="string">'B'</span>])</span><br><span class="line">&gt;&gt;&gt;&gt; <span class="keyword">True</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">muzhen</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">369</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">38</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">114</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">muzhen</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=7.0.1"></script>



  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  
  



  




  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


  

  

  

  

  

  

  

  

  

  

</body>
</html>
